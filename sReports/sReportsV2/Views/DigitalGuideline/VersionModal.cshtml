@using sReportsV2.Common.Helpers
@using sReportsV2.DTOs.CodeEntry.DataOut;
@using sReportsV2.Common.Extensions;

@{
    var originalMajor = Model?.Version?.Major > 0 ? Model.Version.Major : 1;
    var originalMinor = Model?.Version?.Minor > 0 ? Model.Version.Minor : 0;
}

<div class="modal fade" id="versionModal" role="dialog">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content modal-content-password w-616">
            <div class="float-right filter-close-btn">
                <img alt="" class="close-modal" src="/css/img/icons/close_black.svg">
            </div>
            <div class="modal-body">
                <div class="form-group col-md-12">
                    <form class="designer-item-form" id="versionModalForm">
                        <div class="d-flex advanced-filter-header">
                            <img alt="" class="mr-3" src="/css/img/icons/ClinicalPathway/thesaurus_entry.svg">
                            <div>@sReportsV2.Cache.Resources.TextLanguage.Version</div>
                        </div>
                        <div class="advanced-filter-item input-margin">
                            <div class="label filter-label">
                                @sReportsV2.Cache.Resources.TextLanguage.Major
                            </div>
                            <input class="filter-input" type="number" id="majorVersion" name="majorVersion" value="@(Model?.Version?.Major > 0 ? Model.Version.Major : 1)" />
                        </div>
                        <div class="advanced-filter-item input-margin">
                            <div class="label filter-label">
                                @sReportsV2.Cache.Resources.TextLanguage.Minor
                            </div>
                            <input class="filter-input" type="number" id="minorVersion" name="minorVersion" value="@(Model?.Version?.Minor > 0 ? Model.Version.Minor : 0)" />
                        </div>

                        <div class="advanced-filter-item">
                            <div class="codeset-thesaurus-group">
                                <div class="label filter-label version-history-title input-margin">
                                    @sReportsV2.Cache.Resources.TextLanguage.Version_History
                                </div>
                                <div class="d-flex">
                                    <div class="thesaurus-table-container" id="versionHistoryTableContainer">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="button-partial margin-0">
                            <button class="submit-button right-button margin-left-13" type="button" onclick="saveVersion(event, @originalMajor, @originalMinor)" style="outline: none;">
                                <span class="submit-patient-info">@sReportsV2.Cache.Resources.TextLanguage.Save</span>
                            </button>
                            <div class="button-wrapper-filter float-right" id="close">
                                <a class="btn advanced-cancel" data-dismiss="modal" aria-label="Close">
                                    @sReportsV2.Cache.Resources.TextLanguage.Cancel
                                </a>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>